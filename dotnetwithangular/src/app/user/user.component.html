<div class="head">
  <div class="name">
    <h3>Users</h3>
    <button kendoButton
    class="adduser"
      themeColor="info"
      [toggleable]="false"
      data-toggle="modal"
      data-target="#exampleModal" (click)="reset()"> + Add User 
    </button></div>
  <kendo-grid [data]="allusers">
    <kendo-grid-column
      title="Student.No"
      field="studentId"
      >
    </kendo-grid-column>
    <kendo-grid-column
      title="Name">
      <ng-template kendoGridCellTemplate let-dataItem>
        <div class="photo">
          <div *ngIf="!imgtrue" class="customer-photo">{{dataItem.profileImage}}</div>
          <div class="customer-name">{{ dataItem.studentName }}</div>
        </div>
      </ng-template>
    </kendo-grid-column>
    <kendo-grid-column
      title="Email Id"
      field="email">
    </kendo-grid-column>
    <kendo-grid-column
      field="Discontinued" title="Action" >
      <ng-template kendoGridCellTemplate let-dataItem>
        <button kendoButton themeColor="warning" style="margin-right:10px;" data-toggle="modal" data-target="#exampleModal" (click)="edit(dataItem)">Edit</button>
        <button kendoButton themeColor="error" data-toggle="modal" data-target="#exampleModal1" (click)="delete(dataItem)">Delete</button>
      </ng-template>
    </kendo-grid-column>
  </kendo-grid>


<!-- modal-->
<div class="modal fade" id="exampleModal" tabindex="-1"
  role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 *ngIf="!editable" class="modal-title" id="exampleModalLabel">
          Add User
        </h5>
        <h5 *ngIf="editable"  class="modal-title" id="exampleModalLabel">
          Edit User
        </h5>
        <button type="button" class="close"
          data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <form [formGroup]="Form">
        <div class="modal-body">
          <div class="form-group">
            <label for="exampleFormControlInput1" class="form-label">Name</label>
            <input type="text" class="form-control" id="exampleFormControlInput1" formControlName="userName" placeholder="Enter the name"  [class.is-invalid]="userName.invalid && (userName.dirty || userName.touched)">
            <div *ngIf="userName.invalid && (userName.dirty || userName.touched)" class="text-danger">
              <div *ngIf="userName.errors?.['required']">
                  This field is required.
              </div>
              <div *ngIf="userName.errors?.['minlength']">
                This field must have at least 2 character.
              </div>
              <div *ngIf="userName.errors?.['maxlength']">
                This field must have at most 20 characters.
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="exampleFormControlInput2" class="form-label">Email Id</label>
            <input type="text" class="form-control" id="exampleFormControlInput2" formControlName="email" placeholder="Enter Email Id" [class.is-invalid]="email.invalid && (email.dirty || email.touched)" >
            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="text-danger">
              <div *ngIf="email.errors?.['required']">
                This field is required.
              </div>
              <div *ngIf="email.errors?.['pattern']">
                Enter Valid Email Id in This field.
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button kendoButton type="button" themeColor="error"
            data-dismiss="modal" >
            Close
          </button>  
          <button kendoButton type="submit" *ngIf="editable" themeColor="info" [disabled]="Form.invalid"  (click)="update()" data-dismiss="modal" >
            Update
          </button>
          <button kendoButton
            *ngIf="!editable"
            themeColor="info"
            [disabled]="Form.invalid"
            (click)="validatefn()"
            data-dismiss="modal"
            [toggleable]="false"
           >Save 
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
<!-- modal1 -->
<div class="modal fade" id="exampleModal1" tabindex="-1"
  role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">
          Delete User
        </h5>
        <button type="button" class="close"
          data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
        </button>
      </div>
      <div class="modal-body">
        Do you want to delete the Student <b>{{name}} ({{studentid}})</b> ?
      </div> 
      <div class="modal-footer">
        <button kendoButton type="submit" themeColor="info"  (click)="remove()" data-dismiss="modal" >
          Yes
        </button>
        <button kendoButton type="button" themeColor="error"
          data-dismiss="modal" >
          No
        </button>   
      </div>
    </div>
  </div>
</div>
</div>

<!-- alert -->
<kendo-dialog
  *ngIf="opened"
  [minWidth]="250"
  [width]="450"
>
  <h5 style="margin: 30px; text-align: center;">
    {{messagecontent}}
  </h5>
  <kendo-dialog-actions>
    <button kendoButton (click)="close()" themeColor="info">
      OK
    </button>
  </kendo-dialog-actions>
</kendo-dialog>